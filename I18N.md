# ğŸŒ Internazionalizzazione (i18n)

MDF include **next-intl** preconfigurato con Italiano e Inglese.

## ğŸ¯ PerchÃ© Ã¨ giÃ  Configurato?

Avere i18n dall'inizio previene:
- âŒ Testi hardcoded difficili da tradurre dopo
- âŒ Refactoring massiccio quando vuoi espanderti all'estero
- âŒ Codice disorganizzato con stringhe ovunque

âœ… Con i18n fin dall'inizio, sei pronto per il mercato globale!

## ğŸš€ Lingue Supportate

- ğŸ‡®ğŸ‡¹ **Italiano** (default)
- ğŸ‡¬ğŸ‡§ **Inglese**

Facile aggiungerne altre!

## ğŸ“‚ Struttura File

```
messages/
â”œâ”€â”€ it.json          # Traduzioni italiano
â””â”€â”€ en.json          # Traduzioni inglese

i18n.ts              # Configurazione
middleware.ts        # Routing automatico per lingua
```

## âœï¸ Come Usare le Traduzioni

### In Server Components

```tsx
import { useTranslations } from 'next-intl';

export default function MyPage() {
  const t = useTranslations('MyPage');
  
  return (
    <div>
      <h1>{t('title')}</h1>
      <p>{t('description')}</p>
    </div>
  );
}
```

### In Client Components

```tsx
'use client';

import { useTranslations } from 'next-intl';

export default function MyComponent() {
  const t = useTranslations('Common');
  
  return <button>{t('submit')}</button>;
}
```

### Con Parametri

```tsx
// messages/it.json
{
  "welcome": "Benvenuto {name}!"
}

// Componente
t('welcome', { name: 'Mario' })
// Output: "Benvenuto Mario!"
```

### Con Rich Text (HTML/Componenti)

```tsx
// messages/it.json
{
  "link": "Visita {github} per maggiori info"
}

// Componente
t.rich('link', {
  github: (chunks) => (
    <a href="https://github.com/mccoy88f/mdf" className="underline">
      {chunks}
    </a>
  )
})
```

## ğŸ“ Aggiungere Traduzioni

### 1. Aggiungi la chiave in entrambi i file

**messages/it.json**
```json
{
  "MyPage": {
    "title": "Benvenuto",
    "subtitle": "Questa Ã¨ la mia pagina",
    "button": "Clicca qui"
  }
}
```

**messages/en.json**
```json
{
  "MyPage": {
    "title": "Welcome",
    "subtitle": "This is my page",
    "button": "Click here"
  }
}
```

### 2. Usa nel componente

```tsx
import { useTranslations } from 'next-intl';

export default function MyPage() {
  const t = useTranslations('MyPage');
  
  return (
    <div>
      <h1>{t('title')}</h1>
      <p>{t('subtitle')}</p>
      <button>{t('button')}</button>
    </div>
  );
}
```

## ğŸŒ URL con Lingue

Le URL cambiano automaticamente con la lingua:

```
http://localhost:3000/it/        â†’ Italiano
http://localhost:3000/en/        â†’ Inglese
http://localhost:3000/it/about   â†’ About in italiano
http://localhost:3000/en/about   â†’ About in inglese
```

## ğŸ”„ Language Switcher

MDF include un componente per cambiare lingua:

```tsx
import { LanguageSwitcher } from '@/components/LanguageSwitcher';

<LanguageSwitcher />
```

Mostra ğŸ‡®ğŸ‡¹ IT o ğŸ‡¬ğŸ‡§ EN e permette lo switch!

## â• Aggiungere Nuove Lingue

### 1. Aggiorna `i18n.ts`

```typescript
export const locales = ['en', 'it', 'es', 'fr'] as const;
//                                      ^^^^^^ Nuovo!
```

### 2. Crea file traduzioni

```
messages/
â”œâ”€â”€ it.json
â”œâ”€â”€ en.json
â”œâ”€â”€ es.json  â† Nuovo
â””â”€â”€ fr.json  â† Nuovo
```

### 3. Aggiorna middleware

```typescript
// middleware.ts
export const config = {
  matcher: ['/', '/(it|en|es|fr)/:path*', ...]
  //                    ^^^^^^^ Aggiungi qui
};
```

### 4. Riavvia

```bash
docker-compose restart app
```

## ğŸ¨ Formattazione Automatica

next-intl include formatter per numeri, date, valute:

### Numeri

```tsx
import { useFormatter } from 'next-intl';

const format = useFormatter();

format.number(1234.56)
// IT: "1.234,56"
// EN: "1,234.56"
```

### Date

```tsx
format.dateTime(new Date(), {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
})
// IT: "5 gennaio 2026"
// EN: "January 5, 2026"
```

### Valute

```tsx
format.number(19.99, {
  style: 'currency',
  currency: 'EUR'
})
// IT: "19,99 â‚¬"
// EN: "â‚¬19.99"
```

## ğŸ”— Link Internazionalizzati

Usa il componente `Link` di MDF:

```tsx
import { Link } from '@/components/Link';

<Link href="/about">Chi Siamo</Link>
// Diventa automaticamente /it/about o /en/about
```

**NON usare** il Link normale di Next.js per route interne!

## ğŸ“± API Routes

Le API **non sono** internazionalizzate (sono fuori da `[locale]`):

```
app/
â”œâ”€â”€ [locale]/          â† Internazionalizzato
â”‚   â””â”€â”€ page.tsx
â””â”€â”€ api/              â† NON internazionalizzato
    â””â”€â”€ users/
        â””â”€â”€ route.ts
```

Le API sono sempre su `/api/*` senza prefisso lingua.

## ğŸŒ Rilevamento Automatico Lingua

Il middleware rileva automaticamente la lingua preferita:

1. Controlla parametro URL (`/it/`, `/en/`)
2. Se non presente, legge `Accept-Language` header
3. Se non supportata, usa Italiano (default)

L'utente viene reindirizzato automaticamente alla lingua corretta!

## ğŸ§ª Testing con Diverse Lingue

### Browser

1. Apri http://localhost:3000/it/
2. Apri http://localhost:3000/en/
3. Usa il Language Switcher ğŸ‡®ğŸ‡¹ğŸ‡¬ğŸ‡§

### cURL

```bash
# Italiano
curl http://localhost:3000/it/

# Inglese
curl http://localhost:3000/en/
```

## âš™ï¸ Configurazione Avanzata

### Cambiare Lingua Default

```typescript
// i18n.ts
export const defaultLocale: Locale = 'en';  // Cambia in inglese
```

### Disabilitare Prefisso Lingua (non consigliato)

```typescript
// middleware.ts
export default createMiddleware({
  locales,
  defaultLocale,
  localePrefix: 'as-needed'  // Usa prefisso solo per non-default
});
```

Con `as-needed`:
- `/` â†’ Italiano (default)
- `/en` â†’ Inglese

### Namespace Custom

Organizza traduzioni in file separati:

```
messages/
â”œâ”€â”€ it/
â”‚   â”œâ”€â”€ common.json
â”‚   â”œâ”€â”€ homepage.json
â”‚   â””â”€â”€ auth.json
â””â”€â”€ en/
    â”œâ”€â”€ common.json
    â”œâ”€â”€ homepage.json
    â””â”€â”€ auth.json
```

Poi importali:
```typescript
t = useTranslations('homepage');
```

## ğŸ“š Best Practices

### âœ… DO

- **Usa sempre traduzioni** - Mai hardcoded
- **Organizza per pagina/sezione** - Namespace chiari
- **Traduci tutto** - Anche errori e messaggi
- **Testa entrambe le lingue** - Prima di deployare

### âŒ DON'T

- ~~`<h1>Benvenuto</h1>`~~ â†’ âŒ Hardcoded
- ~~`<h1>{locale === 'it' ? 'Benvenuto' : 'Welcome'}</h1>`~~ â†’ âŒ Logic in componente
- ~~`import Link from 'next/link'`~~ â†’ âŒ Link non internazionalizzato

### âœ… Corretto

```tsx
const t = useTranslations('HomePage');
<h1>{t('welcome')}</h1>
```

## ğŸ¯ Esempi Pratici

### Form di Login

```json
// messages/it.json
{
  "Auth": {
    "login": "Accedi",
    "email": "Email",
    "password": "Password",
    "submit": "Entra",
    "forgotPassword": "Password dimenticata?",
    "errors": {
      "invalidCredentials": "Credenziali non valide",
      "emailRequired": "Email obbligatoria"
    }
  }
}
```

```tsx
const t = useTranslations('Auth');

<form>
  <label>{t('email')}</label>
  <input type="email" />
  
  <label>{t('password')}</label>
  <input type="password" />
  
  <button>{t('submit')}</button>
  <a href="#">{t('forgotPassword')}</a>
</form>
```

### Toast/Notifiche

```json
{
  "Notifications": {
    "success": {
      "saved": "Salvato con successo!",
      "deleted": "Eliminato con successo!"
    },
    "error": {
      "generic": "Qualcosa Ã¨ andato storto",
      "network": "Errore di connessione"
    }
  }
}
```

## ğŸ†˜ Troubleshooting

### "useTranslations must be used in a component"

Assicurati di usarlo dentro un componente:

```tsx
// âŒ Fuori dal componente
const t = useTranslations('Page');

export default function Page() {
  return <div>{t('title')}</div>;
}

// âœ… Dentro il componente
export default function Page() {
  const t = useTranslations('Page');
  return <div>{t('title')}</div>;
}
```

### Traduzione non trovata

Controlla:
1. La chiave esiste in **entrambi** it.json e en.json?
2. Il namespace Ã¨ corretto? `useTranslations('MioNamespace')`
3. Hai riavviato dopo modifiche ai JSON?

### Link non funzionano

Usa `Link` da MDF, non da Next.js:

```tsx
// âŒ Sbagliato
import Link from 'next/link';

// âœ… Corretto
import { Link } from '@/components/Link';
```

---

**ğŸŒ Con MDF, la tua app Ã¨ pronta per il mondo!**
